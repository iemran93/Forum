{{ template "base" .}}

{{ define "content"}}

<!-- display posts -->
{{range .Posts}}
<div class="post-card">
    <h2>{{.Title}}</h2>
    <p><strong>Post ID:</strong> {{.ID}}</p>
    <p><strong>User ID:</strong> {{.UserID}}</p>
    <p><strong>Username:</strong>{{.Username}}</p>
    <p><strong>Content:</strong> {{.Content}}</p>
    <p><strong>Categories:</strong> {{range .Categories}} {{.Name}} {{end}}</p>
    <p><strong>Created At:</strong> {{.CreatedAt}}</p>
</div>
<hr>

<!-- add comment -->
<div class="comment-section">
    <form action="/comment" method="post" id="addcomment" onsubmit="handleAddComment(event)">
        <input type="hidden" name="post_id" value="{{.ID}}">
        <textarea name="content" rows="5" cols="50" placeholder="Start typing here" required></textarea>
        <br>
        <button type="submit" class="comment-button">Add comment</button>
        <br>
        <div id="error-message" class="error-message" style="display:none;"></div>
    </form>
</div>
{{end}}

<!-- display comments -->
{{range .Comments}}
<div id="comment-{{.ID}}" class="post-card">
    <h3>{{.Username}}</h3>
    <p>{{.CreatedAt}}</p>
    <p>{{.Content}}</p>

    <button onclick="handleLike('comment', '{{.ID}}', 'like')" class="like-button">Like</button>
    <span class="like-count">{{.Likes}}</span>
    <button onclick="handleLike('comment', '{{.ID}}', 'dislike')" class="dislike-button">Dislike</button>
    <span class="dislike-count">{{.Dislikes}}</span>
</div>
<hr>
{{end}}

{{end}}